<section class="w-full">
  <h1 class="text-4xl mb-2">OBSERVABLE</h1>
  <hr class="mb-4">
  <div class="grid grid-cols-1 lg:grid-cols-2 lg:grid-rows-2 gap-4">
    <p-card class="lg:col-start-1">
      <h2 class="text-2xl text-indigo-600 font-semibold">CREACIÓN</h2>
      <hr class="mt-3">
      <pre class="whitespace-pre-wrap">
        <code>
          public obs$ = new 
          <span class="text-indigo-600">Observable</span> < <code-type>StreamDataType</code-type> >( subscriber?: <code-type>Subscriber </code-type>< <code-type>StreamDataType</code-type> > )
        </code>
        <code>
          public obs$ = new <span class="text-indigo-600">Observable</span>< <code-type>StreamDataType</code-type> >()
        </code>
      </pre>
    </p-card>
    <p-card class="lg:col-start-2 lg:row-start-1 lg:row-span-full">
      <h2 class="text-2xl text-indigo-600 font-semibold">SUBSCRIPCIÓN</h2>
      <hr class="mt-3">
      <pre class="whitespace-pre-wrap">
        <code>
          Observable.subscribe(CallbackNext, CallbackErr, CallbackCompleted)
        </code>
      </pre>
      <ul>
        <li>- CallbackNext: Callback que se ejecuta cada que se recibe una actualización de datos del observador</li>
        <li>- CallbackErr: Callback que se ejecuta cuando se genera un error en el stream</li>
        <li>- CallbackCompleted: Callback que se ejecuta una vez el observador se completa</li>
      </ul>
      <hr class="my-4">
      <h3 class="text-xl font-semibold mb-4">Metodos de subscripción: </h3>
      <div class="my-3">
        <h4 class="ml-4 text-lg mb-2">Implementación directa:</h4>
        <pre class="whitespace-pre-wrap rounded-md shadow shadow-slate-700">
          <code>
            this.obs$.subscribe({{'{'}}
              next: ( resp ) => {{'{ }'}},
              error: ( error ) => {{'{ }'}},
              complete: () => {{'{ }'}}
            {{'}'}})
          </code>
        </pre>
      </div>
      <div class="my-3">
        <h4 class="ml-4 text-lg mb-2">A travéz de una interfaz:</h4>
        <pre class="whitespace-pre-wrap rounded-md shadow shadow-slate-700">
          <code>
            public observer: <code-type>Observer</code-type>< <code-type>string</code-type> > = {{'{'}}
              next: (resp) => console.log(resp),
              error: (err) => console.log(err),
              complete: () => console.log('complete')
            {{'}'}}
          
            this.obs$.subscribe(this.observer)
          </code>
        </pre>
      </div>
    </p-card>
    <p-card class="lg:row-start-2 lg:col-start-1">
      <h2 class="text-2xl text-indigo-600 font-semibold">Ejemplo</h2>
      <hr class="my-4">
      
      <div class="rounded-md shadow shadow-slate-700 p-4 mb-4"
           *ngIf="statuses.length > 0">
        <h3 class="text-xl flex flex-row gap-4 mb-3">
          Stream Data 
          <i *ngIf="!isCompleted" class="fas fa-circle-notch fa-spin"></i>
        </h3>
        <p class="text-green-500 flex flex-row" *ngFor="let item of statuses">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
            {{item}}
        </p>
        <p *ngIf="isCompleted" class="text-green-500 flex flex-row">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
          </svg>
          Observable completed, the data stream has stopped
        </p>
      </div>
      <button type="button"
              (click)="startStream()"
              class="bg-indigo-600 p-2 rounded-md hover:bg-indigo-900">
        Iniciar stream de datos
      </button>
    </p-card>
  </div>
</section>
